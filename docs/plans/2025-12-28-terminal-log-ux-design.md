# 터미널 로그 UX 설계

> 작성일: 2025-12-28
> 목표: 비전문가도 이해 가능한 일관된 터미널 로그

---

## 1. 설계 원칙

- **작업 로직 방해 금지**: 기존 코드 최소 수정
- **방어적 업데이트**: 문제 시 롤백 가능하도록 commit 후 작업
- **일관성**: 모든 로그가 동일한 포맷 사용
- **가시성**: 중요도에 따른 시각적 구분

---

## 2. 로그 포맷 규칙

### 기본 포맷
```
[시간] [상태이모지] 메시지
```

### 상태 이모지
| 상태 | 이모지 | 용도 |
|------|--------|------|
| 시작 | 🚀 | 워커/작업 시작 |
| 진행 | ⏳ | 작업 중 |
| 완료 | ✅ | 성공 |
| 실패 | ❌ | 일반 오류 |
| 심각 | ⛔ | 즉시 확인 필요 |
| 경고 | ⚠️ | 주의 |
| 대기 | 💤 | 할 일 없음 |
| 종료 | 🏁 | 워커 종료 |

---

## 3. 일반 모드 vs 디버그 모드

### 일반 모드 (기본)
```
[09:30:15] 🚀 워커 시작 (77개 모니터링)
[09:30:16] 💤 대기 중...
[09:31:00] ⏳ john@gmail.com 결제재개 중...
[09:31:45] ✅ john@gmail.com 완료 (45초)
[09:31:46] ❌ jane@gmail.com 실패: 타임아웃
[09:32:00] 🏁 사이클 완료 (성공 1, 실패 1)
```

### 디버그 모드 (`DEBUG_MODE=true`)
```
[09:31:00] ⏳ john@gmail.com 결제재개 중...
           ├─ 브라우저 연결: k8dj2nf1
           ├─ 페이지 이동: youtube.com/paid_memberships
           ├─ 언어 감지: en
           ├─ 버튼 클릭: Resume membership
           └─ 팝업 확인: Confirm
[09:31:45] ✅ john@gmail.com 완료 (45초)
           └─ 다음 결제일: 2025-01-15
```

---

## 4. 워커 생명주기 표시

### 워커 시작
```
══════════════════════════════════════════════════════════════
🚀 통합워커 시작 | 2025-12-28 09:30:15
   모니터링: 77개 | 재개 기준: 120분 전 | 일시중지 기준: 10분 후
══════════════════════════════════════════════════════════════
```

### 사이클 (작업 없음)
```
[09:31] 💤 대기 중 (77개 모니터링)
```

### 사이클 (작업 있음)
```
[09:33] ──────────────────────────────────────
[09:33] 📋 작업 발견: 재개 2건, 일시중지 1건
[09:33] ──────────────────────────────────────
[09:33] ⏳ john@gmail.com 결제재개 중...
[09:34] ✅ john@gmail.com 완료 (42초)
[09:35] ❌ jane@gmail.com 실패: 타임아웃
[09:36] ──────────────────────────────────────
[09:36] 📊 사이클 완료: ✅2 ❌1 (총 120초)
[09:36] ──────────────────────────────────────
```

### 워커 종료
```
══════════════════════════════════════════════════════════════
🏁 통합워커 종료 | 2025-12-28 10:30:15
   실행 시간: 1시간 0분 | 처리: ✅15 ❌3 💤42사이클
══════════════════════════════════════════════════════════════
```

---

## 5. 에러 강조 표시

### 일반 실패
```
[09:35] ❌ jane@gmail.com 실패: 타임아웃
```

### 심각한 오류
```
[09:35] ⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔
[09:35] ⛔ 심각: Google 로그인 차단됨
[09:35] ⛔ 계정: jane@gmail.com
[09:35] ⛔ 조치: 수동 로그인 필요
[09:35] ⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔⛔
```

### 심각한 오류 기준
| 오류 유형 | 표시 |
|-----------|------|
| reCAPTCHA 발생 | ⛔ 심각 |
| 계정 잠김/차단 | ⛔ 심각 |
| 구독 만료됨 | ⛔ 심각 |
| 3회 연속 실패 | ⛔ 심각 |
| 그 외 일반 오류 | ❌ 일반 |

---

## 6. 수정 대상 파일

1. `src/application/usecases/ScheduledSubscriptionWorkerUseCase.js` - 워커 생명주기, 사이클 로그
2. `src/application/usecases/EnhancedResumeSubscriptionUseCase.js` - 작업 진행 로그
3. `src/application/usecases/EnhancedPauseSubscriptionUseCase.js` - 작업 진행 로그
4. `src/services/TerminalLogService.js` (신규) - 공통 로그 포맷팅 헬퍼

---

## 7. 롤백 계획

1. 작업 전 현재 상태 commit
2. 문제 발생 시 `git checkout <commit-hash>`로 복구
